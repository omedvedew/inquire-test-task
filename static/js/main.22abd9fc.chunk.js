(this["webpackJsonpinquire-test-task"]=this["webpackJsonpinquire-test-task"]||[]).push([[0],{41:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(17),a=n.n(c),o=(n(41),n(0)),i=function(){return Object(o.jsxs)("footer",{className:"footer",children:[Object(o.jsx)("p",{children:"Olexii Medvediev's test task"}),Object(o.jsx)("p",{children:"Lviv"}),Object(o.jsx)("p",{children:"2021"})]})},r=n(5),l=function(){return Object(o.jsx)("div",{className:"header__logo",children:Object(o.jsx)(r.b,{to:"/inquire-test-task/",className:"header__logo__item",style:{backgroundImage:"url(/inquire-test-task/images/inquire-logo.png)"}})})},j=function(){return Object(o.jsxs)("div",{className:"header__menu",children:[Object(o.jsx)(r.b,{to:"/inquire-test-task/blog",className:"header__menu__item",children:"blog"}),Object(o.jsx)(r.b,{to:"/inquire-test-task/new-post",className:"header__menu__item",children:"new post"})]})},m=function(){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)(l,{}),Object(o.jsx)(j,{})]})},b=n(4),d=n(26),p=n(11),u=n(14),h=Object(u.b)((function(e){return{state:e}}),(function(e){return{dispatchPostId:function(t){return e({type:"DISPATCH_POST_ID",value:t})}}}))((function(e){var t=e.id,n=e.title,s=e.body,c=e.dispatchPostId;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("article",{className:"m-p-i_article",children:[Object(o.jsx)("h2",{className:"m-p-i_article_title",children:n}),Object(o.jsx)("p",{className:"m-p-i_article_body",children:s}),Object(o.jsx)(r.b,{to:"/inquire-test-task/blog/post-page",className:"m-p-i_article_more-btn",onClick:function(){return c(t)},children:"read more"})]})})})),O=function(){var e=Object(s.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1];return 0===n.length?fetch("https://bloggy-api.herokuapp.com/posts").then((function(e){return e.json()})).then((function(e){return c((function(t){return[].concat(Object(d.a)(t),Object(d.a)(e))}))})):console.log("waiting for response"),console.log(n),Object(o.jsx)("div",{className:"main__posts-list-container",children:n.map((function(e){var t=e.id,n=e.title,s=e.body;return Object(o.jsx)("div",{className:"main__posts-list-container__item",children:Object(o.jsx)(h,{id:t,title:n,body:s})},t)}))})},_=function(){return Object(o.jsxs)("div",{className:"main__greetings-page",children:[Object(o.jsx)("h1",{className:"main__greetings-page_title",children:"Welcome to Olexii's test task page!"}),Object(o.jsx)(r.b,{to:"/inquire-test-task/blog",className:"main__greetings-page_get-started-btn",children:"get started"})]})},x=n(3),g=function(e){var t=e.currentPost;return Object(o.jsx)("div",{className:"m-p-p_comments_comments-box",children:t.comments.map((function(e){var t=e.id,n=e.body;return Object(o.jsxs)("div",{className:"comment",children:[Object(o.jsxs)("h4",{children:[t,":"]}),Object(o.jsx)("p",{children:n})]},t)}))})},f=n(12),N=n.n(f),v=function(e){var t=e.id,n=Object(s.useState)({isChangesSubmited:!1}),c=Object(p.a)(n,2),a=c[0],i=c[1];return Object(o.jsx)(o.Fragment,{children:!1===a.isChangesSubmited?Object(o.jsxs)("form",{className:"m-p-p_post-change-form",onSubmit:function(e){e.preventDefault(),N.a.put("https://bloggy-api.herokuapp.com/posts/".concat(t),{title:a.title,body:a.body}),i((function(e){return Object(x.a)(Object(x.a)({},e),{},{isChangesSubmited:!0})}))},children:[Object(o.jsx)("h2",{className:"m-p-p_form-title",children:"Change this post:"}),Object(o.jsxs)("div",{className:"m-p-p_input-box",children:[Object(o.jsx)("h3",{className:"m-p-p_input-title",children:"Post's title"}),Object(o.jsx)("input",{type:"text",placeholder:"Enter post title",className:"m-p-p_input",onChange:function(e){i((function(t){return Object(x.a)(Object(x.a)({},t),{},{title:e.target.value})}))}})]}),Object(o.jsxs)("div",{className:"m-p-p_input-box",children:[Object(o.jsx)("h3",{className:"m-p-p_input-title",children:"Post's content"}),Object(o.jsx)("textarea",{type:"text",placeholder:"Enter post content",className:"m-p-p_input",rows:"5",onChange:function(e){i((function(t){return Object(x.a)(Object(x.a)({},t),{},{body:e.target.value})}))}})]}),Object(o.jsx)("button",{className:"m-p-p_submit-btn",children:"submit"})]}):Object(o.jsx)("div",{className:"m-p-p_message",children:"Thanks for changes!"})})},y=Object(u.b)((function(e){return{state:e}}))((function(e){var t=e.state;console.log(t);var n=Object(s.useState)({isPostDeleted:!1,isPostChanged:!1}),c=Object(p.a)(n,2),a=c[0],i=c[1];t.postToBeRenderedId?(!0!==t.isPostDownloaded&&fetch("https://bloggy-api.herokuapp.com/posts/".concat(t.postToBeRenderedId,"?_embed=comments")).then((function(e){return e.json()})).then((function(e){return i((function(t){return Object(x.a)(Object(x.a)({},t),e)}))})),t.isPostDownloaded=!0,console.log(a)):console.log("waiting for response");var l=function(){return Object(o.jsx)("div",{className:"m-p-p_comments_comments-box",children:"There is no comments to this post."})},j=function(){i((function(e){return Object(x.a)(Object(x.a)({},e),{},{isPostChanged:!0})}))},m=function(){N.a.delete("https://bloggy-api.herokuapp.com/posts/".concat(t.postToBeRenderedId)),i((function(){return{isPostDeleted:!0}}))},b=Object(s.useState)({isCommentSent:!1}),d=Object(p.a)(b,2),u=d[0],h=d[1],O=function(e){h((function(t){return Object(x.a)(Object(x.a)({},t),{},{body:e.target.value})}))},_=function(e){h((function(t){return Object(x.a)(Object(x.a)({},t),{},{author:e.target.value})}))},f=function(e){e.preventDefault(),N.a.post("https://bloggy-api.herokuapp.com/comments",{postId:t.postToBeRenderedId,body:u.body,id:u.author}),h((function(){return{isCommentSent:!0}}))};return Object(o.jsx)("div",{className:"main__post-page",children:!1===a.isPostDeleted?Object(o.jsx)(o.Fragment,{children:!0===t.isPostDownloaded?Object(o.jsxs)("div",{className:"main__post-page__post",children:[Object(o.jsx)("h1",{className:"m-p-p_title",children:a.title}),Object(o.jsx)("p",{className:"m-p-p_body",children:a.body}),Object(o.jsxs)("div",{className:"m-p-p_comments",children:[Object(o.jsx)("h3",{className:"m-p-p_comments_title",children:"Comments:"}),void 0!==a.comments&&null!==a.comments&&a.comments.length>0?Object(o.jsx)(g,{currentPost:a}):l(),!1===u.isCommentSent?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{className:"m-p-p_comments-title",children:"Add new comment:"}),Object(o.jsxs)("form",{className:"m-p-p_form",onSubmit:f,children:[Object(o.jsx)("input",{type:"text",placeholder:"Enter your name",className:"m-p-p_input",onChange:_}),Object(o.jsx)("textarea",{className:"m-p-p_input",rows:"5",placeholder:"Enter comment",onChange:O}),Object(o.jsx)("button",{className:"m-p-p_send-btn",type:"submit",children:"send"})]})]}):Object(o.jsx)("h3",{className:"m-p-p_comments-title",children:"Thanks for your comment!"})]}),Object(o.jsxs)("div",{className:"m-p-p_buttons-container",children:[!1===a.isPostChanged?Object(o.jsx)("button",{className:"m-p-p_change-btn",onClick:j,children:"change this post"}):Object(o.jsx)(v,{id:t.postToBeRenderedId}),Object(o.jsx)("button",{className:"m-p-p_delete-btn",onClick:m,children:"delete this post"})]})]}):Object(o.jsx)("div",{className:"main__post-page__message",children:Object(o.jsxs)("p",{children:["We are waiting for server response or the current post wasn't selected, please return to ",Object(o.jsx)(r.b,{to:"/inquire-test-task/blog",children:"blog page"})," and select a post you would like to see."]})})}):Object(o.jsxs)("div",{className:"main__post-page__delete-message",children:["This post was deleted! Visit ",Object(o.jsx)(r.b,{to:"/inquire-test-task/blog",children:"\xa0blog page\xa0"})," to see another one."]})})})),k=function(){var e=Object(s.useState)({isFormSent:!1}),t=Object(p.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"main__new-post-page",children:[Object(o.jsx)("h2",{className:"main__new-post-page__title",children:"Create your post here"}),!1===n.isFormSent?Object(o.jsxs)("form",{className:"main__new-post-page__form",onSubmit:function(e){function t(){for(var e=[],t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,s=0;s<10;s++)e.push(t.charAt(Math.floor(Math.random()*n)));return e.join("")}e.preventDefault(),c((function(e){return Object(x.a)(Object(x.a)({},e),{},{id:t(),isFormSent:!0})})),N.a.post("https://bloggy-api.herokuapp.com/posts",{id:n.id,title:n.title,body:n.body})},children:[Object(o.jsxs)("div",{className:"m-n-f_input-box",children:[Object(o.jsx)("h3",{className:"m-n-f_input-title",children:"Post's title"}),Object(o.jsx)("input",{type:"text",placeholder:"Enter post title",className:"m-n-f_input",onChange:function(e){c((function(t){return Object(x.a)(Object(x.a)({},t),{},{title:e.target.value})}))}})]}),Object(o.jsxs)("div",{className:"m-n-f_input-box",children:[Object(o.jsx)("h3",{className:"m-n-f_input-title",children:"Post's content"}),Object(o.jsx)("textarea",{type:"text",placeholder:"Enter post content",className:"m-n-f_input",rows:"5",onChange:function(e){c((function(t){return Object(x.a)(Object(x.a)({},t),{},{body:e.target.value})}))}})]}),Object(o.jsx)("button",{className:"m-n-f_submit-btn",children:"submit"})]}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("p",{children:["Thank you for sending a new post, you will find it at the ",Object(o.jsx)(r.b,{to:"/inquire-test-task/blog",children:"blog page"}),"."]})})]})},w=function(){return Object(o.jsxs)("main",{className:"main",children:[Object(o.jsx)(b.a,{path:"/inquire-test-task/",exact:!0,component:_}),Object(o.jsx)(b.a,{path:"/inquire-test-task/blog",exact:!0,component:O}),Object(o.jsx)(b.a,{path:"/inquire-test-task/blog/post-page",exact:!0,component:y}),Object(o.jsx)(b.a,{path:"/inquire-test-task/new-post",exact:!0,component:k})]})},S=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(m,{}),Object(o.jsx)(w,{}),Object(o.jsx)(i,{})]})},P=n(20),C=Object(P.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISPATCH_POST_ID":return Object(x.a)(Object(x.a)({},e),{},{postToBeRenderedId:t.value,isPostDownloaded:!1});case"DISPATCH_NEW_POST":return Object(x.a)(Object(x.a)({},e),{},{newPostState:{id:t.id,title:t.title,body:t.body,comments:[]}});default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(o.jsx)(u.a,{store:C,children:Object(o.jsx)(r.a,{children:Object(o.jsx)(S,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.22abd9fc.chunk.js.map